#### ë¶€ëª¨ í´ë˜ìŠ¤ì¸ Item ì—”í‹°í‹°ì— @Inheritance ì‚¬ìš©, ì¶”ìƒ í´ë˜ìŠ¤ë¡œ ë³€ê²½

<details>
      <summary>Item.java</summary>

```
@Entity
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name="DTYPE")
public abstract class Item {
    @Id @GeneratedValue
    @Column(name="ITEM_ID")
    private Long id;

    private String name;

    private int price;

    private int stockQuantity;

    @ManyToMany(mappedBy = "items")
    private List<Category> categories = new ArrayList<Category>();

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getPrice() {
        return price;
    }

    public void setPrice(int price) {
        this.price = price;
    }

    public int getStockQuantity() {
        return stockQuantity;
    }

    public void setStockQuantity(int stockQuantity) {
        this.stockQuantity = stockQuantity;
    }
}


```

- `@Inheritance(strategy = InheritanceType.SINGLE_TABLE)`ì„ í†µí•´ ë‹¨ì¼í…Œì´ë¸”ë¡œ ìƒì„±
- `@DiscriminatorColumn`ì„ í†µí•´ Album, Book, Movie í´ë˜ìŠ¤ëª…ì´ item í…Œì´ë¸”ì— ì €ì¥
  (ê°ê° í…Œì´ë¸”ì„ êµ¬ë¶„í•˜ê¸° ìœ„í•¨)

</details>

#### ì—”í‹°í‹° ìƒì„±

<details>
      <summary>Album.java</summary>

```
@Entity
public class Album extends Item{
    private String artist;
    private String etc;

    public String getArtist() {
        return artist;
    }

    public void setArtist(String artist) {
        this.artist = artist;
    }

    public String getEtc() {
        return etc;
    }

    public void setEtc(String etc) {
        this.etc = etc;
    }
}

```

</details>
<details>
      <summary>Book.java</summary>

```
@Entity
public class Book extends Item{
    private String author;
    private String isbn;

    public String getAuthor() {
        return author;
    }

    public void setAuthor(String author) {
        this.author = author;
    }

    public String getIsbn() {
        return isbn;
    }

    public void setIsbn(String isbn) {
        this.isbn = isbn;
    }
}

```

</details>
<details>
      <summary>Movie.java</summary>

```
@Entity
public class Movie extends Item {
    private String director;
    private String actor;

    public String getDirector() {
        return director;
    }

    public void setDirector(String director) {
        this.director = director;
    }

    public String getActor() {
        return actor;
    }

    public void setActor(String actor) {
        this.actor = actor;
    }
}

```

</details>

#### í…Œì´ë¸” ìƒì„±
```
Hibernate: 
    create table Item (
        price integer not null,
        stockQuantity integer not null,
        ITEM_ID bigint not null,
        DTYPE varchar(31) not null,
        actor varchar(255),
        artist varchar(255),
        author varchar(255),
        director varchar(255),
        etc varchar(255),
        isbn varchar(255),
        name varchar(255),
        primary key (ITEM_ID)
    )
```

- item í…Œì´ë¸” ë‚´ì— Album, Book, Movie ì—”í‹°í‹° í•„ë“œë“¤ì´ ì €ì¥ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŒ

#### DBì— ê°’ ë“±ë¡

<details>
      <summary>JpaMain.java</summary>

```
Book book = new Book();
book.setName("JPA");
book.setAuthor("ê¹€ì˜í•œ");

em.persist(book);

tx.commit();
```

</details>

<img src="https://github.com/iieunji023/jpa-ex01/blob/main/images/ex04_h2.png" width="300">

- ê°’ì´ ë“±ë¡ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŒ

ğŸ’¡ ì´ ìƒíƒœì—ì„œ ì¡°ì¸í…Œì´ë¸” ì „ëµìœ¼ë¡œ ë°”ê¿”ë³´ì
1. Item ì—”í‹°í‹°ì—ì„œ `@Inheritance(strategy = InheritanceType.*JOINED*)` JOINEDë¡œ ë°”ê¾¸ê¸°
2. í…Œì´ë¸” ìƒì„± í™•ì¸

    ```
    Hibernate: 
        create table Item (
            price integer not null,
            stockQuantity integer not null,
            ITEM_ID bigint not null,
            DTYPE varchar(31) not null,
            name varchar(255),
            primary key (ITEM_ID)
        )
    Hibernate: 
        create table Album (
            ITEM_ID bigint not null,
            artist varchar(255),
            etc varchar(255),
            primary key (ITEM_ID)
        )
    Hibernate: 
        create table Book (
            ITEM_ID bigint not null,
            author varchar(255),
            isbn varchar(255),
            primary key (ITEM_ID)
        )
    Hibernate: 
        create table Movie (
            ITEM_ID bigint not null,
            actor varchar(255),
            director varchar(255),
            primary key (ITEM_ID)
        )
    ```

    - ì—”í‹°í‹°ë³„ë¡œ í…Œì´ë¸” ìƒì„±
    - ê° ì—”í‹°í‹°ì—ëŠ” ITEM_IDê°€ PKë¡œ ë“±ë¡
3. ê°’ ì¡°íšŒ

<img src="https://github.com/iieunji023/jpa-ex01/blob/main/images/ex04_h2_2.png" width="300">

### ëª¨ë“  í…Œì´ë¸”ì— ë“±ë¡ì¼, ìˆ˜ì •ì¼ ì¶”ê°€

#### ê³µí†µ ì»¬ëŸ¼ì´ ë“¤ì–´ìˆëŠ” baseEntity ì¶”ìƒ í´ë˜ìŠ¤ ìƒì„±

<details>
      <summary>baseEntity.java</summary>

```
@MappedSuperclass
public abstract class BaseEntity {
    private String createBy;
    private LocalDateTime createDate;
    private String lastModifiedBy;
    private LocalDateTime lastModifiedDate;

    public String getCreateBy() {
        return createBy;
    }

    public void setCreateBy(String createBy) {
        this.createBy = createBy;
    }

    public LocalDateTime getCreateDate() {
        return createDate;
    }

    public void setCreateDate(LocalDateTime createDate) {
        this.createDate = createDate;
    }

    public String getLastModifiedBy() {
        return lastModifiedBy;
    }

    public void setLastModifiedBy(String lastModifiedBy) {
        this.lastModifiedBy = lastModifiedBy;
    }

    public LocalDateTime getLastModifiedDate() {
        return lastModifiedDate;
    }

    public void setLastModifiedDate(LocalDateTime lastModifiedDate) {
        this.lastModifiedDate = lastModifiedDate;
    }
}

```

- `@MappedSuperclass`ë¥¼ í†µí•´ ìƒì†í•  ìˆ˜ ìˆë„ë¡ ì§€ì •

</details>

#### Member, Order, Delivery, Category ë“± ëª¨ë“  ì—”í‹°í‹°ì—ì„œ baseEntity ìƒì†
```
@Entity
public class Member extends BaseEntity {}

/ ...
```

#### í…Œì´ë¸” ìƒì„±
```
Hibernate: 
    create table Member (
        MEMBER_ID bigint not null,
        createDate timestamp(6),
        lastModifiedDate timestamp(6),
        city varchar(255),
        createBy varchar(255),
        lastModifiedBy varchar(255),
        name varchar(255),
        street varchar(255),
        zipcode varchar(255),
        primary key (MEMBER_ID)
    )
```

- Member ì—”í‹°í‹°ì— ë”°ë¡œ í•„ë“œë¥¼ ì¶”ê°€í•˜ì§€ ì•Šê³  BaseEntityë¥¼ ìƒì†ë°›ìŒìœ¼ë¡œì¨ ìë™ìœ¼ë¡œ í•„ë“œê°€ ì¶”ê°€ë¨