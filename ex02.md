ğŸ’¡ Member ì—”í‹°í‹° ë‚´ì— Orders í•„ë“œê°€ ìˆëŠ” ê²ƒì€ ë§¤ìš° ì˜ëª»ëœ ì„¤ê³„!
(ì˜ˆì œë‹ˆê¹Œ ë„˜ì–´ê°€ëŠ”ê±¸ë¡œâ€¦ğŸ˜‚)

> ì—”í‹°í‹° ìƒì„±

<details>
      <summary>Member.java</summary>

```
@Entity
public class Member {
    @Id @GeneratedValue
    @Column(name="MEMBER_ID")
    private Long id;

    private String name;

    private String city;

    private String street;

    private String zipcode;

    @OneToMany(mappedBy = "member") // mappedByë¥¼ í†µí•´ ì—°ê´€ê´€ê³„ ì£¼ì¸ ì§€ì •
    private List<Order> orders = new ArrayList<>(); // ê´€ë¡€ìƒ new ArrayList<>(); ë§ì´ ì”€

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getCity() {
        return city;
    }

    public void setCity(String city) {
        this.city = city;
    }

    public String getStreet() {
        return street;
    }

    public void setStreet(String street) {
        this.street = street;
    }

    public String getZipcode() {
        return zipcode;
    }

    public void setZipcode(String zipcode) {
        this.zipcode = zipcode;
    }
}

```

- order_id ê°ì²´ ëŒ€ì‹  order ê°ì²´ë¥¼ í•„ë“œë¡œ ìƒì„±
- âš ï¸ Memberì— Orderê°€ ë“¤ì–´ê°€ëŠ”ê²ƒì€ ì¢‹ì€ êµ¬ì¡°ëŠ” ì•„ë‹˜!

</details>

<details>
      <summary>Order.java</summary>

```
@Entity
@Table(name="ORDERS")
public class Order {
    @Id @GeneratedValue
    @Column(name="ORDER_ID")
    private Long id;

    @ManyToOne  // Orderê°€ N, memberê°€ 1
    private Member member;

    private LocalDateTime orderDate;

    @OneToMany(mappedBy = "order")
    private List<OrderItem> orderItems = new ArrayList<>();

    @Enumerated(EnumType.STRING)
    private OrderStatus status;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public Member getMember() {
        return member;
    }

    public void setMember(Member member) {
        this.member = member;
    }

    public LocalDateTime getOrderDate() {
        return orderDate;
    }

    public void setOrderDate(LocalDateTime orderDate) {
        this.orderDate = orderDate;
    }

    public OrderStatus getStatus() {
        return status;
    }

    public void setStatus(OrderStatus status) {
        this.status = status;
    }

}


```

- member_id ëŒ€ì‹  Member ê°ì²´ í•„ë“œ ì¶”ê°€
- item_id ëŒ€ì‹  orderItem í•„ë“œ ì¶”ê°€
    - `mappedBy`ë¥¼ í†µí•´ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì¸ OrderItem í•„ë“œì˜ orderê³¼ ì—°ê²°

</details>

<details>
      <summary>OrderItem.java</summary>

```
@Entity
public class OrderItem {
    @Id @GeneratedValue
    @Column(name="ORDER_ITEM_ID")
    private Long id;

    @ManyToOne // OrderItemì´ N, Orderê°€ 1
    @JoinColumn(name="ORDER_ID")
    private Order order;

    @ManyToOne  // OrderItem N, Item 1
    @JoinColumn(name="ITEM_ID")
    private Item item;

    private int orderPrice;

    private int count;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public Order getOrder() {
        return order;
    }

    public void setOrder(Order order) {
        this.order = order;
    }

    public Item getItem() {
        return item;
    }

    public void setItem(Item item) {
        this.item = item;
    }

    public int getOrderPrice() {
        return orderPrice;
    }

    public void setOrderPrice(int orderPrice) {
        this.orderPrice = orderPrice;
    }

    public int getCount() {
        return count;
    }

    public void setCount(int count) {
        this.count = count;
    }
}

```

- order_id í•„ë“œ ëŒ€ì‹  Order ê°ì²´ í•„ë“œ ì¶”ê°€
- item_id í•„ë“œ ëŒ€ì‹  Item ê°ì²´ í•„ë“œ ì¶”ê°€

</details>

> ì—”í‹°í‹°ì— ê°’ ë“±ë¡

<details>
      <summary>JpaMain.java</summary>

```
Order order = new Order();
order.addOrderItem(new OrderItem());
em.persist(order);
em.persist(orderItem);

tx.commit();
```

</details>

<details>
      <summary>Order.java</summary>

```
public void addOrderItem(OrderItem orderItem) {
        orderItems.add(orderItem);
        orderItem.setOrder(this);   // ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ë˜ë„ë¡
}
```

- Order ì—”í‹°í‹° ë‚´ì˜ í•„ë“œì¸ orderItemsì— ê°’ ë“±ë¡
- ë§¤ê°œë³€ìˆ˜ë¡œ ë“¤ì–´ì˜¤ëŠ” orderItem ì—”í‹°í‹° ë‚´ì—ë„ order ê°’ ë“±ë¡
- ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ê°€ ë˜ë„ë¡ ê°’ì„ ì„¤ì •í•´ì£¼ëŠ” ê²ƒ!

</details>

ğŸ’¡ ì´ë ‡ê²Œ ì–‘ë°©í–¥ìœ¼ë¡œ í•˜ì§€ ì•Šê³  ì•„ë˜ ì½”ë“œì™€ ê°™ì´ ê°œë°œì„ ì§„í–‰í•´ë„ ìƒê´€ì—†ë‹¤

<details>
      <summary>JpaMain.java</summary>

```
Order order = new Order();
em.persist(order);

OrderItem orderItem = new OrderItem();
orderItem.setOrder(order);

em.persist(orderItem);

tx.commit();
```

</details>

<details>
      <summary>ğŸ—¯ï¸ ê°•ì˜ë¥¼ ë“¤ìœ¼ë©´ì„œ ë“  ì˜ë¬¸ì </summary>

- Orderê³¼ Itemì€ ì™œ ë‹¤ëŒ€ë‹¤ ê´€ê³„ì¸ê°€?
- í•œë²ˆ ì£¼ë¬¸(Order)í•  ë•Œ ì—¬ëŸ¬ ìƒí’ˆ(Item)ì´ ë“¤ì–´ê°€ëŠ” ê±´ ì´í•´
    - ê·¸ë ‡ë‹¤ë©´ ì¼ëŒ€ë‹¤ ì•„ë‹Œê°€? ë¼ëŠ” ìƒê°ì´ ë“¤ì–´ì„œ ê²€ìƒ‰ì„ í•´ë´¤ë‹¤([ì°¸ê³ 1](https://www.inflearn.com/community/questions/955559/orderitem-item-%EA%B4%80%EA%B3%84%EC%97%90-%EB%8C%80%ED%95%B4-%EA%B6%81%EA%B8%88%ED%95%A9%EB%8B%88%EB%8B%A4), [ì°¸ê³ 2](https://www.inflearn.com/community/questions/1120720/order%EC%99%80-item%EA%B0%84%EC%9D%98-%EA%B4%80%EA%B3%84%EC%97%90-%EB%8C%80%ED%95%B4%EC%84%9C-%EA%B6%81%EA%B8%88%ED%95%9C%EC%A0%90%EC%9D%B4-%EC%9E%88%EC%8A%B5%EB%8B%88%EB%8B%A4?focusComment=306781))
- ì˜ˆì‹œë¡œ ì„¤ëª…í•˜ë‹ˆ ì´í•´ê°€ ì˜ ë˜ì—ˆë‹¤.
- ì˜ˆë¥¼ë“¤ì–´ ì£¼ë¬¸ì€ O1ë¶€í„° ì‹œì‘í•˜ëŠ” IDë¥¼ ìƒì„±
- ìƒí’ˆì€ I1ë¶€í„° ì‹œì‘í•˜ëŠ” IDë¥¼ ìƒì„±í•œë‹¤ê³  ê°€ì •í•´ë³´ì
- ìƒí’ˆ ë¹„ëˆ„(I1), ì¹˜ì•½(I2), ìƒ´í‘¸(I3)ê°€ ìˆë‹¤ê³  í•˜ì
- A, B ê³ ê°ì´ ìƒí’ˆì„ ë‹´ì•˜ì„ ë•Œ ì¥ë°”êµ¬ë‹ˆëŠ”
- A(O1) â‡’ I1, I2, I3
- B(O2) â‡’ I1, I3
- ì´ë ‡ê²Œ êµ¬ì„±ë˜ì–´ ìˆì„ ê²ƒì´ë‹¤.
- ê·¸ëŸ¬ë©´ ê²°êµ­ **ì£¼ë¬¸ í•˜ë‚˜ì—ëŠ” ì—¬ëŸ¬ ìƒí’ˆì´ ë“¤ì–´ê°€ê³ , ê° ìƒí’ˆë“¤ì€ ì—¬ëŸ¬ ì£¼ë¬¸ì— í¬í•¨**ë  ìˆ˜ ìˆë‹¤!
- ì¦‰, ë‹¤ëŒ€ë‹¤ì˜ ê´€ê³„ë¼ëŠ” ê²ƒ.
- ì´ëŸ° ê²½ìš°ì—ëŠ” **ë‹¤ëŒ€ë‹¤ ê´€ê³„ë¥¼ ì¼ëŒ€ë‹¤, ë‹¤ëŒ€ì¼ ê´€ê³„ë¡œ í’€ì–´ë‚´ì„œ í‘œí˜„**
- ë”°ë¼ì„œ ë³¸ ì˜ˆì œì—ì„œëŠ” Order í…Œì´ë¸”ê³¼ Item í…Œì´ë¸” ì‚¬ì´ì— OrderItemì´ë¼ëŠ” í…Œì´ë¸”ì„ ì‚¬ì´ì— ë‘ê³  ì—°ê´€ê´€ê³„ë¥¼ ì„¤ì •í–ˆë‹¤

</details>

